{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Terraform Repo Template","text":"<p>A structured template for Terraform projects, enabling consistent and scalable infrastructure deployments with best practices, CI/CD integration, and environment-specific configurations.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Multi-environment support - Pre-configured dev, qa, and prod environments with environment-specific tfvars</li> <li>Security scanning - Multi-layer scanning with Checkov, TFLint, and Gitleaks</li> <li>CI/CD pipelines - GitHub Actions workflows for validation, deployment, cost estimation, and release management</li> <li>Pre-commit hooks - Automated code quality checks including formatting, validation, and secret detection</li> <li>Module system - Production-ready reusable Terraform modules with documentation</li> <li>Auto-tagging - All resources automatically tagged with <code>ManagedBy</code> and <code>Environment</code></li> <li>Semantic releases - Automated versioning and changelog generation from conventional commits</li> <li>Dev container - Pre-configured development environment with all required tools</li> </ul>"},{"location":"#quick-navigation","title":"Quick Navigation","text":"Section Description Quick Start Get up and running in minutes Usage Guide Full command reference and working with environments Repository Structure Annotated directory tree and file descriptions Contributing Branching strategy, PR process, and code review Commit Conventions Conventional commits format and version impact Configuration Reference for all configuration files Security Security scanning layers and secure defaults CI/CD Workflows All GitHub Actions workflows documented Changelog Release history and changelog process"},{"location":"#tech-stack","title":"Tech Stack","text":"Tool Purpose Terraform &gt;= 1.0 Infrastructure as Code AWS Provider ~&gt; 5.0 Cloud provider TFLint Linting with AWS plugin Checkov Policy-as-code security scanning Gitleaks Secret detection Semantic Release Automated versioning Infracost Cost estimation terraform-docs Auto-generated documentation Pre-commit Git hook management"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#process","title":"Process","text":"<p>This project uses Semantic Release to automate versioning and changelog generation.</p>"},{"location":"changelog/#how-it-works","title":"How It Works","text":"<ol> <li>Commit analysis: Semantic Release inspects commit messages on the <code>main</code> branch</li> <li>Version determination: The commit type determines the version bump:<ul> <li><code>fix</code> / <code>perf</code> / <code>refactor</code> \u2192 Patch release (e.g., 1.0.1)</li> <li><code>feat</code> \u2192 Minor release (e.g., 1.1.0)</li> <li><code>BREAKING CHANGE</code> \u2192 Major release (e.g., 2.0.0)</li> </ul> </li> <li>Changelog update: <code>CHANGELOG.md</code> is updated with release notes generated from commit messages</li> <li>GitHub release: A new release is created with generated release notes</li> </ol>"},{"location":"changelog/#configuration","title":"Configuration","text":"<p>The release process is configured in <code>.releaserc.json</code>:</p> <ul> <li>Branches: Releases are triggered from <code>main</code> and <code>master</code></li> <li>Changelog: Written to <code>CHANGELOG.md</code> in the repository root</li> <li>Commit message: <code>chore(release): version X.Y.Z [skip ci]</code></li> </ul>"},{"location":"changelog/#release-history","title":"Release History","text":"<p>The full changelog is maintained in the repository's CHANGELOG.md file. It is automatically updated with each release.</p> <p>See the GitHub Releases page for downloadable release artifacts and notes.</p> <p>Note</p> <p>The links above will point to your repository once the documentation site URL is configured by the docs workflow.</p>"},{"location":"commit-conventions/","title":"Commit Conventions","text":"<p>This project uses Conventional Commits to ensure a meaningful, consistent commit history and enable automated releases.</p>"},{"location":"commit-conventions/#format","title":"Format","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n</code></pre>"},{"location":"commit-conventions/#type-required","title":"Type (Required)","text":"<p>The type determines the version bump triggered by Semantic Release:</p> Type Description Version Bump <code>feat</code> A new feature Minor (1.1.0) <code>fix</code> A bug fix Patch (1.0.1) <code>perf</code> Performance improvement Patch (1.0.1) <code>refactor</code> Code restructuring Patch (1.0.1) <code>docs</code> Documentation changes None <code>chore</code> Maintenance tasks None <code>test</code> Test additions/updates None <code>style</code> Formatting changes None"},{"location":"commit-conventions/#scope-optional","title":"Scope (Optional)","text":"<p>The part of the codebase affected by the change. Common scopes:</p> <ul> <li><code>s3</code> - S3 bucket module</li> <li><code>vpc</code> - VPC configuration</li> <li><code>ci</code> - CI/CD workflows</li> <li><code>deps</code> - Dependencies</li> <li><code>devcontainer</code> - Dev container setup</li> </ul>"},{"location":"commit-conventions/#subject-required","title":"Subject (Required)","text":"<p>A brief description in imperative mood (e.g., \"add\", not \"added\" or \"adds\").</p>"},{"location":"commit-conventions/#examples","title":"Examples","text":""},{"location":"commit-conventions/#feature","title":"Feature","text":"<pre><code>feat(s3): add encryption configuration for buckets\n\nConfigure AES256 encryption for all S3 buckets to meet\nsecurity compliance requirements.\n</code></pre>"},{"location":"commit-conventions/#bug-fix","title":"Bug Fix","text":"<pre><code>fix(provider): correct default region configuration\n</code></pre>"},{"location":"commit-conventions/#breaking-change","title":"Breaking Change","text":"<pre><code>feat(backend): migrate to S3 backend\n\nBREAKING CHANGE: Local backend is no longer the default.\nExisting state must be migrated with terraform init -migrate-state.\n</code></pre> <p>Note</p> <p>A <code>BREAKING CHANGE:</code> note in the commit body triggers a major version bump (e.g., 1.0.0 \u2192 2.0.0).</p>"},{"location":"commit-conventions/#release-process","title":"Release Process","text":"<p>Releases are fully automated via Semantic Release:</p> <ol> <li>Commits are analyzed on the <code>main</code> branch</li> <li>Version is bumped based on commit types</li> <li><code>CHANGELOG.md</code> is updated automatically</li> <li>A GitHub release is created with release notes</li> </ol> <p>The release workflow is configured in <code>.releaserc.json</code>. See CI/CD Workflows for details.</p>"},{"location":"commit-conventions/#pr-title-linting","title":"PR Title Linting","text":"<p>Pull request titles are validated against the conventional commit format by the <code>lint-pr</code> workflow. Ensure your PR title follows the same <code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code> format.</p>"},{"location":"configuration/","title":"Configuration","text":"<p>Reference for all configuration files in this template.</p>"},{"location":"configuration/#terraform-configuration","title":"Terraform Configuration","text":""},{"location":"configuration/#versionstf","title":"<code>versions.tf</code>","text":"<p>Defines Terraform and provider version constraints.</p> <pre><code>terraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~&gt; 5.0\"\n    }\n  }\n}\n</code></pre> <ul> <li>Terraform version: <code>&gt;= 1.0</code> allows any 1.x version</li> <li>AWS provider: <code>~&gt; 5.0</code> allows 5.x minor/patch updates</li> <li>Backend: Defaults to local; S3 backend template available (commented)</li> </ul>"},{"location":"configuration/#terraform-version","title":"<code>.terraform-version</code>","text":"<p>Specifies the exact Terraform version (<code>1.10.5</code>) for use with tfenv or asdf.</p>"},{"location":"configuration/#providerstf","title":"<code>providers.tf</code>","text":"<p>AWS provider configuration with default region and auto-tagging.</p> <ul> <li>Default region: <code>ap-southeast-1</code> (configurable via <code>var.region</code>)</li> <li>Default tags: <code>ManagedBy=Terraform</code> and <code>Environment</code> applied to all resources</li> </ul>"},{"location":"configuration/#variablestf","title":"<code>variables.tf</code>","text":"<p>Root module input variables:</p> Variable Type Default Description <code>env</code> <code>string</code> (required) Environment name <code>prefix</code> <code>string</code> <code>\"dev\"</code> Resource name prefix <code>region</code> <code>string</code> <code>\"ap-southeast-1\"</code> AWS region"},{"location":"configuration/#localstf","title":"<code>locals.tf</code>","text":"<p>Local values for resource naming, environment detection, and common tags.</p> <ul> <li><code>resource_prefix</code>: <code>{prefix}-{env}</code> pattern for consistent naming</li> <li><code>is_production</code> / <code>is_dev</code>: Boolean flags for conditional logic</li> <li><code>common_tags</code>: Merged tags for resources</li> </ul>"},{"location":"configuration/#linting-and-security","title":"Linting and Security","text":""},{"location":"configuration/#tflinthcl","title":"<code>.tflint.hcl</code>","text":"<p>TFLint configuration with the AWS plugin.</p> <p>Key settings:</p> <ul> <li><code>format = \"compact\"</code> - Concise output</li> <li><code>call_module_type = \"all\"</code> - Lint all module calls</li> <li>AWS plugin <code>v0.38.0</code> enabled</li> </ul> <p>Rule categories:</p> Category Rules Documentation <code>terraform_documented_variables</code>, <code>terraform_documented_outputs</code> Typing <code>terraform_typed_variables</code> Naming <code>terraform_naming_convention</code> (snake_case) Version management <code>terraform_required_version</code>, <code>terraform_required_providers</code> Code quality <code>terraform_deprecated_interpolation</code>, <code>terraform_unused_declarations</code> Module standards <code>terraform_module_pinned_source</code>, <code>terraform_standard_module_structure</code>"},{"location":"configuration/#checkovyml","title":"<code>.checkov.yml</code>","text":"<p>Checkov security scanner configuration.</p> <ul> <li>Frameworks: <code>terraform</code>, <code>terraform_plan</code></li> <li>Quiet mode: Enabled for clean output</li> <li>Skipped checks: Documented in Security</li> </ul>"},{"location":"configuration/#git-and-editor","title":"Git and Editor","text":""},{"location":"configuration/#gitignore","title":"<code>.gitignore</code>","text":"<p>Ignores Terraform state files, provider plugins, override files, sensitive tfvars, Infracost cache, and MkDocs build output (<code>site/</code>).</p>"},{"location":"configuration/#editorconfig","title":"<code>.editorconfig</code>","text":"<p>Enforces consistent coding styles:</p> <ul> <li>UTF-8 encoding</li> <li>LF line endings</li> <li>2-space indentation</li> <li>Trailing whitespace trimming (except markdown and diff files)</li> <li>Final newline insertion</li> </ul>"},{"location":"configuration/#pre-commit-configyaml","title":"<code>.pre-commit-config.yaml</code>","text":"<p>Pre-commit hook configuration. See Security for details on each hook.</p> <p>Hook groups:</p> <ol> <li>File quality: trailing-whitespace, end-of-file-fixer, check-yaml, check-added-large-files, check-merge-conflict, detect-private-key</li> <li>Terraform: terraform_fmt, terraform_validate, terraform_docs, terraform_tflint, terraform_checkov</li> <li>Security: gitleaks</li> </ol>"},{"location":"configuration/#cicd","title":"CI/CD","text":""},{"location":"configuration/#releasercjson","title":"<code>.releaserc.json</code>","text":"<p>Semantic Release configuration.</p> <ul> <li>Branches: <code>main</code>, <code>master</code></li> <li>Plugins: commit-analyzer, release-notes-generator, GitHub releases, changelog, git</li> </ul> <p>Release rules map commit types to version bumps (see Commit Conventions).</p>"},{"location":"configuration/#githubdependabotyml","title":"<code>.github/dependabot.yml</code>","text":"<p>Dependabot configuration for automated dependency updates.</p> Ecosystem Directory Schedule <code>terraform</code> <code>/</code> Daily <code>github-actions</code> <code>/</code> Daily <code>pip</code> <code>/</code> Daily"},{"location":"configuration/#templatesyncignore","title":"<code>.templatesyncignore</code>","text":"<p>Files excluded from template repository sync, preventing downstream customizations from being overwritten.</p>"},{"location":"configuration/#documentation","title":"Documentation","text":""},{"location":"configuration/#mkdocsyml","title":"<code>mkdocs.yml</code>","text":"<p>MkDocs site configuration with Material theme.</p> <ul> <li>Theme: Material with dark/light toggle, deep purple primary color</li> <li>Features: Navigation tabs, search suggestions, code copy</li> <li>Plugins: Search, minify, git-revision-date-localized</li> </ul> <p>The <code>site_url</code>, <code>repo_url</code>, and <code>repo_name</code> fields are auto-configured by the docs workflow when the template is first used.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Guidelines for contributing to this Terraform repository.</p>"},{"location":"contributing/#branching-strategy","title":"Branching Strategy","text":"<p>All changes must go through feature branches and pull requests.</p> <p>Critical Rule</p> <p>Never commit directly to the <code>main</code> branch. All changes must be made via pull requests.</p>"},{"location":"contributing/#branch-naming","title":"Branch Naming","text":"<p>Use descriptive branch names with a type prefix:</p> Prefix Purpose Example <code>feat/</code> New features <code>feat/add-rds-module</code> <code>fix/</code> Bug fixes <code>fix/s3-encryption-config</code> <code>chore/</code> Maintenance tasks <code>chore/update-provider-version</code> <code>docs/</code> Documentation changes <code>docs/update-usage-guide</code> <code>refactor/</code> Code restructuring <code>refactor/simplify-locals</code>"},{"location":"contributing/#workflow","title":"Workflow","text":"<ol> <li> <p>Create a feature branch from <code>main</code>:</p> <pre><code>git checkout main\ngit pull origin main\ngit checkout -b feat/your-feature-name\n</code></pre> </li> <li> <p>Implement changes following the commit conventions</p> </li> <li> <p>Run pre-commit hooks before pushing:</p> <pre><code>pre-commit run --all-files\n</code></pre> </li> <li> <p>Push and create a pull request:</p> <pre><code>git push -u origin feat/your-feature-name\n</code></pre> </li> <li> <p>Wait for CI/CD checks to pass</p> </li> <li> <p>Merge after approval</p> </li> </ol>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":""},{"location":"contributing/#pr-requirements","title":"PR Requirements","text":"<ul> <li>Descriptive title following conventional commit format</li> <li>Clear description of changes and motivation</li> <li>All CI/CD checks passing</li> <li>At least one approval (for team repositories)</li> </ul>"},{"location":"contributing/#automated-checks","title":"Automated Checks","text":"<p>The following checks run automatically on pull requests:</p> <ul> <li>Pre-commit CI (formatting, validation, linting, security)</li> <li>Terraform documentation generation</li> <li>Checkov security scanning</li> <li>Gitleaks secret detection</li> <li>Infracost cost estimation</li> <li>PR title linting</li> </ul>"},{"location":"contributing/#review-guidelines","title":"Review Guidelines","text":"<p>When reviewing Terraform PRs, check for:</p> <ul> <li>Security: No hardcoded secrets, encryption enabled, public access restricted</li> <li>Naming: Resources follow the <code>{prefix}-{env}-{type}-{name}</code> pattern</li> <li>Variables: All variables are typed and documented</li> <li>Outputs: All outputs have descriptions</li> <li>Modules: Reusable modules used where appropriate</li> <li>Cost: Review Infracost estimates for unexpected costs</li> </ul>"},{"location":"contributing/#code-style","title":"Code Style","text":""},{"location":"contributing/#terraform-conventions","title":"Terraform Conventions","text":"<ul> <li>Use <code>snake_case</code> for all resource, variable, output, and local names</li> <li>Include descriptions for all variables and outputs</li> <li>Use type constraints for all variables</li> <li>Prefer <code>locals</code> for computed values and repeated expressions</li> <li>Keep resources organized: one primary resource type per file for complex modules</li> </ul>"},{"location":"contributing/#file-organization","title":"File Organization","text":"<p>Follow the standard Terraform file structure:</p> <pre><code>versions.tf     # Version constraints and backend\nproviders.tf    # Provider configuration\nvariables.tf    # Input variables\nlocals.tf       # Local values\nmain.tf         # Resource definitions\noutputs.tf      # Output values\ndata.tf         # Data sources (if needed)\n</code></pre>"},{"location":"contributing/#formatting","title":"Formatting","text":"<p>Terraform formatting is enforced automatically:</p> <ul> <li>Pre-commit hooks run <code>terraform fmt</code></li> <li>CI/CD checks validate formatting</li> <li>Use 2-space indentation (enforced by <code>.editorconfig</code>)</li> </ul>"},{"location":"quick-start/","title":"Quick Start","text":"<p>Get up and running with this Terraform template in minutes.</p>"},{"location":"quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>Terraform &gt;= 1.0 (recommended: 1.10.5 via <code>.terraform-version</code>)</li> <li>Docker (for dev container setup)</li> <li>pre-commit</li> <li>TFLint</li> <li>Checkov</li> <li>AWS credentials configured</li> </ul>"},{"location":"quick-start/#using-the-template","title":"Using the Template","text":""},{"location":"quick-start/#1-create-a-new-repository","title":"1. Create a new repository","text":"<p>Click Use this template on GitHub to create a new repository from this template.</p>"},{"location":"quick-start/#2-clone-and-enter-the-repository","title":"2. Clone and enter the repository","text":"<pre><code>git clone https://github.com/&lt;your-org&gt;/&lt;your-repo&gt;.git\ncd &lt;your-repo&gt;\n</code></pre>"},{"location":"quick-start/#3-set-up-pre-commit-hooks","title":"3. Set up pre-commit hooks","text":"<pre><code>pre-commit install\n</code></pre>"},{"location":"quick-start/#4-initialize-tflint","title":"4. Initialize TFLint","text":"<pre><code>tflint --init\n</code></pre>"},{"location":"quick-start/#5-initialize-terraform","title":"5. Initialize Terraform","text":"<pre><code>terraform init\n</code></pre>"},{"location":"quick-start/#6-verify-the-setup","title":"6. Verify the setup","text":"<pre><code># Format check\nterraform fmt -check -recursive\n\n# Validate configuration\nterraform validate\n\n# Run linter\ntflint --config=.tflint.hcl\n\n# Run security scan\ncheckov --config-file .checkov.yml\n\n# Run all pre-commit hooks\npre-commit run --all-files\n</code></pre>"},{"location":"quick-start/#dev-container-setup","title":"Dev Container Setup","text":"<p>For a consistent development environment, use the included dev container:</p> <ol> <li>Install the Dev Containers VSCode extension</li> <li>Open the repository in VSCode</li> <li>Click Reopen in Container when prompted</li> <li>All tools are pre-installed and ready to use</li> </ol>"},{"location":"quick-start/#first-deployment","title":"First Deployment","text":""},{"location":"quick-start/#1-configure-aws-credentials","title":"1. Configure AWS credentials","text":"<p>Set up GitHub secrets for CI/CD:</p> <ul> <li><code>AWS_ACCESS_KEY_ID</code></li> <li><code>AWS_SECRET_ACCESS_KEY</code></li> <li><code>AWS_REGION</code></li> </ul>"},{"location":"quick-start/#2-customize-environment-variables","title":"2. Customize environment variables","text":"<p>Edit the environment-specific tfvars files:</p> <pre><code>environments/dev/dev.tfvars    # Development settings\nenvironments/qa/qa.tfvars      # QA/staging settings\nenvironments/prod/prod.tfvars  # Production settings\n</code></pre>"},{"location":"quick-start/#3-plan-and-apply","title":"3. Plan and apply","text":"<pre><code># Plan for dev environment\nterraform plan -var-file=environments/dev/dev.tfvars\n\n# Apply when satisfied\nterraform apply -var-file=environments/dev/dev.tfvars\n</code></pre>"},{"location":"quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Usage Guide for the full command reference</li> <li>Review the Repository Structure to understand the layout</li> <li>Check Security for scanning configuration</li> <li>Set up CI/CD Workflows for automated deployments</li> </ul>"},{"location":"repository-structure/","title":"Repository Structure","text":"<p>Annotated directory tree with descriptions of every file and directory.</p>"},{"location":"repository-structure/#directory-tree","title":"Directory Tree","text":"<pre><code>.\n\u251c\u2500\u2500 .checkov.yml                        # Checkov security scanner configuration\n\u251c\u2500\u2500 .devcontainer/                      # Development container configuration\n\u2502   \u251c\u2500\u2500 devcontainer.json               # Devcontainer settings and extensions\n\u2502   \u2514\u2500\u2500 Dockerfile                      # Docker image for dev environment\n\u251c\u2500\u2500 .editorconfig                       # Consistent coding styles across editors\n\u251c\u2500\u2500 .github/                            # GitHub-specific configurations\n\u2502   \u251c\u2500\u2500 dependabot.yml                  # Automated dependency updates\n\u2502   \u251c\u2500\u2500 ISSUE_TEMPLATE/\n\u2502   \u2502   \u2514\u2500\u2500 issue_template.md           # Issue template for bug reports/features\n\u2502   \u251c\u2500\u2500 pull_request_template.md        # PR template with checklist\n\u2502   \u2514\u2500\u2500 workflows/                      # GitHub Actions workflows\n\u2502       \u251c\u2500\u2500 automerge.yaml              # Auto-merge bot PRs\n\u2502       \u251c\u2500\u2500 checkov.yaml                # Standalone Checkov security scan\n\u2502       \u251c\u2500\u2500 docs.yaml                   # Documentation build and deploy\n\u2502       \u251c\u2500\u2500 gitleaks.yaml               # Secret detection scan\n\u2502       \u251c\u2500\u2500 infracost.yaml              # Cost estimation for PRs\n\u2502       \u251c\u2500\u2500 lint-pr.yaml                # PR title linting\n\u2502       \u251c\u2500\u2500 pre-commit-auto-update.yaml # Auto-update pre-commit hooks\n\u2502       \u251c\u2500\u2500 pre-commit-ci.yaml          # Pre-commit checks on PRs\n\u2502       \u251c\u2500\u2500 release.yaml                # Semantic release automation\n\u2502       \u251c\u2500\u2500 stale.yaml                  # Stale issue/PR management\n\u2502       \u251c\u2500\u2500 template-repo-sync.yaml     # Template repository sync\n\u2502       \u251c\u2500\u2500 terraform-aws.yml           # Terraform plan/apply/destroy\n\u2502       \u251c\u2500\u2500 tf-docs.yaml                # Auto-generate Terraform docs\n\u2502       \u2514\u2500\u2500 update-license.yml          # Auto-update license year\n\u251c\u2500\u2500 .gitignore                          # Git ignore rules\n\u251c\u2500\u2500 .pre-commit-config.yaml             # Pre-commit hooks configuration\n\u251c\u2500\u2500 .releaserc.json                     # Semantic release configuration\n\u251c\u2500\u2500 .templatesyncignore                 # Files excluded from template sync\n\u251c\u2500\u2500 .terraform-version                  # Terraform version for tfenv/asdf\n\u251c\u2500\u2500 .terraform.lock.hcl                 # Terraform dependency lock file\n\u251c\u2500\u2500 .tflint.hcl                         # TFLint linting configuration\n\u251c\u2500\u2500 .vscode/\n\u2502   \u2514\u2500\u2500 extensions.json                 # Recommended VSCode extensions\n\u251c\u2500\u2500 BEST-PRACTICES.md                   # Best practices implementation summary\n\u251c\u2500\u2500 CHANGELOG.md                        # Auto-generated changelog\n\u251c\u2500\u2500 CLAUDE.md                           # AI assistant guidance\n\u251c\u2500\u2500 CODEOWNERS                          # Code ownership definitions\n\u251c\u2500\u2500 LICENSE                             # MIT license\n\u251c\u2500\u2500 README.md                           # Project documentation\n\u251c\u2500\u2500 TF-DOCS.md                          # Auto-generated Terraform documentation\n\u251c\u2500\u2500 docs/                               # MkDocs documentation source\n\u2502   \u251c\u2500\u2500 changelog.md                    # Changelog process documentation\n\u2502   \u251c\u2500\u2500 commit-conventions.md           # Conventional commits guide\n\u2502   \u251c\u2500\u2500 configuration.md                # Configuration file reference\n\u2502   \u251c\u2500\u2500 contributing.md                 # Contributing guidelines\n\u2502   \u251c\u2500\u2500 index.md                        # Documentation home page\n\u2502   \u251c\u2500\u2500 quick-start.md                  # Getting started guide\n\u2502   \u251c\u2500\u2500 repository-structure.md         # This file\n\u2502   \u251c\u2500\u2500 security.md                     # Security scanning documentation\n\u2502   \u251c\u2500\u2500 stylesheets/\n\u2502   \u2502   \u2514\u2500\u2500 extra.css                   # Custom MkDocs styles\n\u2502   \u251c\u2500\u2500 usage.md                        # Usage guide and commands\n\u2502   \u2514\u2500\u2500 workflows.md                    # CI/CD workflow documentation\n\u251c\u2500\u2500 environments/                       # Environment-specific variables\n\u2502   \u251c\u2500\u2500 dev/\n\u2502   \u2502   \u2514\u2500\u2500 dev.tfvars                  # Development settings\n\u2502   \u251c\u2500\u2500 prod/\n\u2502   \u2502   \u2514\u2500\u2500 prod.tfvars                 # Production settings\n\u2502   \u2514\u2500\u2500 qa/\n\u2502       \u2514\u2500\u2500 qa.tfvars                   # QA/staging settings\n\u251c\u2500\u2500 examples/                           # Example configurations\n\u2502   \u251c\u2500\u2500 complete-infrastructure/        # Full stack example\n\u2502   \u251c\u2500\u2500 data-sources/                   # AWS data source patterns\n\u2502   \u2514\u2500\u2500 module-composition/             # Module reuse patterns\n\u251c\u2500\u2500 locals.tf                           # Local values and naming logic\n\u251c\u2500\u2500 main.tf                             # Main resource definitions\n\u251c\u2500\u2500 mkdocs.yml                          # MkDocs site configuration\n\u251c\u2500\u2500 modules/                            # Reusable Terraform modules\n\u2502   \u2514\u2500\u2500 s3-bucket/\n\u2502       \u251c\u2500\u2500 main.tf                     # S3 bucket resources\n\u2502       \u251c\u2500\u2500 outputs.tf                  # Module outputs\n\u2502       \u251c\u2500\u2500 README.md                   # Module documentation\n\u2502       \u2514\u2500\u2500 variables.tf                # Module input variables\n\u251c\u2500\u2500 outputs.tf                          # Root module outputs\n\u251c\u2500\u2500 providers.tf                        # AWS provider configuration\n\u251c\u2500\u2500 requirements.txt                    # Python dependencies for MkDocs\n\u251c\u2500\u2500 variables.tf                        # Root module input variables\n\u2514\u2500\u2500 versions.tf                         # Terraform and provider versions\n</code></pre>"},{"location":"repository-structure/#key-directories","title":"Key Directories","text":""},{"location":"repository-structure/#environments","title":"<code>environments/</code>","text":"<p>Contains environment-specific variable files. Each environment has its own directory with a <code>.tfvars</code> file defining configuration values appropriate for that environment (instance sizes, feature flags, retention periods, etc.).</p>"},{"location":"repository-structure/#modules","title":"<code>modules/</code>","text":"<p>Reusable Terraform modules following the standard structure (<code>main.tf</code>, <code>variables.tf</code>, <code>outputs.tf</code>, <code>README.md</code>). Each module includes validation, documentation, and secure defaults.</p>"},{"location":"repository-structure/#examples","title":"<code>examples/</code>","text":"<p>Production-ready example configurations demonstrating common patterns. Each example is self-contained with its own README.</p>"},{"location":"repository-structure/#githubworkflows","title":"<code>.github/workflows/</code>","text":"<p>GitHub Actions workflow files for CI/CD automation. See CI/CD Workflows for documentation of each workflow.</p>"},{"location":"repository-structure/#docs","title":"<code>docs/</code>","text":"<p>MkDocs documentation source files. Built and deployed to GitHub Pages automatically.</p>"},{"location":"security/","title":"Security","text":"<p>This template implements multi-layer security scanning to catch vulnerabilities, misconfigurations, and secrets before they reach production.</p>"},{"location":"security/#security-scanning-layers","title":"Security Scanning Layers","text":""},{"location":"security/#layer-1-checkov","title":"Layer 1: Checkov","text":"<p>Checkov provides policy-as-code scanning for Terraform configurations.</p> <p>Configuration file: <code>.checkov.yml</code></p> <pre><code>quiet: true\nframework:\n  - terraform\n  - terraform_plan\n</code></pre> <p>What it checks:</p> <ul> <li>Encryption enabled on storage resources</li> <li>Public access restrictions</li> <li>Logging and monitoring configuration</li> <li>IAM policy best practices</li> <li>Network security (security groups, NACLs)</li> <li>Backup and recovery settings</li> </ul> <p>Skipped checks (configured in <code>.checkov.yml</code>):</p> Check ID Reason <code>CKV_AWS_18</code> S3 access logging creates circular dependency <code>CKV2_AWS_62</code> S3 event notifications not required for all buckets <code>CKV_AWS_144</code> Cross-region replication is expensive and optional <code>CKV_AWS_145</code> AES256 encryption is sufficient for many use cases <code>CKV_AWS_300</code> Abort incomplete multipart is optional <p>Adding custom skip rules:</p> <p>Add entries to the <code>skip-check</code> list in <code>.checkov.yml</code>:</p> <pre><code>skip-check:\n  - CKV_AWS_XXX  # Reason for skipping\n</code></pre>"},{"location":"security/#layer-2-tflint","title":"Layer 2: TFLint","text":"<p>TFLint provides linting with the AWS plugin for AWS-specific rules.</p> <p>Configuration file: <code>.tflint.hcl</code></p> <p>Enabled rules:</p> Rule Purpose <code>terraform_required_version</code> Enforce Terraform version constraint <code>terraform_required_providers</code> Ensure provider version constraints <code>terraform_typed_variables</code> Enforce variable type declarations <code>terraform_documented_variables</code> Require variable descriptions <code>terraform_documented_outputs</code> Require output descriptions <code>terraform_naming_convention</code> Enforce snake_case naming <code>terraform_deprecated_interpolation</code> Catch deprecated syntax <code>terraform_unused_declarations</code> Find unused variables/outputs <code>terraform_comment_syntax</code> Enforce <code>#</code> for comments <code>terraform_module_pinned_source</code> Require pinned module sources <code>terraform_standard_module_structure</code> Enforce module file structure <p>AWS plugin: Version 0.38.0 enables AWS-specific rules that catch resource misconfigurations.</p>"},{"location":"security/#layer-3-gitleaks","title":"Layer 3: Gitleaks","text":"<p>Gitleaks detects hardcoded secrets in the repository.</p> <p>Integration:</p> <ul> <li>Pre-commit hook runs on every commit</li> <li>Standalone GitHub Actions workflow on pull requests</li> <li>Blocks commits containing secrets (API keys, passwords, tokens)</li> </ul>"},{"location":"security/#secure-defaults","title":"Secure Defaults","text":""},{"location":"security/#s3-bucket-module","title":"S3 Bucket Module","text":"<p>The included <code>modules/s3-bucket</code> module enforces security best practices:</p> <ul> <li>Encryption: AES256 server-side encryption enabled by default</li> <li>Public access: All public access blocked by default</li> <li>Versioning: Configurable, recommended for production</li> <li>Lifecycle rules: Support for automated object management</li> </ul>"},{"location":"security/#provider-default-tags","title":"Provider Default Tags","text":"<p>All resources are automatically tagged via provider-level <code>default_tags</code>:</p> <pre><code>default_tags {\n  tags = {\n    ManagedBy   = \"Terraform\"\n    Environment = var.env\n  }\n}\n</code></pre>"},{"location":"security/#naming-conventions","title":"Naming Conventions","text":"<p>Resource naming follows the pattern <code>{prefix}-{env}-{resource-type}-{name}</code>, enforced by TFLint's <code>terraform_naming_convention</code> rule with snake_case format.</p>"},{"location":"security/#running-security-scans-locally","title":"Running Security Scans Locally","text":"<pre><code># Run Checkov\ncheckov --config-file .checkov.yml\n\n# Run TFLint (first time: init plugins)\ntflint --init\ntflint --config=.tflint.hcl\n\n# Run Gitleaks\ngitleaks detect --source .\n\n# Run all checks via pre-commit\npre-commit run --all-files\n</code></pre>"},{"location":"security/#cicd-security-integration","title":"CI/CD Security Integration","text":"<p>Security scanning runs automatically in CI/CD:</p> <ul> <li>Pre-commit CI: Runs Checkov and TFLint on every pull request</li> <li>Checkov workflow: Standalone security scan on pull requests</li> <li>Gitleaks workflow: Standalone secret detection on pull requests</li> <li>Pre-deployment: Terraform validate and format checks before plan/apply</li> </ul> <p>See CI/CD Workflows for complete workflow documentation.</p>"},{"location":"usage/","title":"Usage Guide","text":"<p>Complete command reference and guide for working with this Terraform template.</p>"},{"location":"usage/#command-reference","title":"Command Reference","text":""},{"location":"usage/#formatting","title":"Formatting","text":"<pre><code># Auto-format all Terraform files\nterraform fmt -recursive\n\n# Check formatting without modifying files\nterraform fmt -check -recursive\n</code></pre>"},{"location":"usage/#validation","title":"Validation","text":"<pre><code># Validate configuration syntax\nterraform validate\n\n# Run TFLint (first time: downloads plugins)\ntflint --init\ntflint --config=.tflint.hcl\n\n# Run Checkov security scan\ncheckov --config-file .checkov.yml\n</code></pre>"},{"location":"usage/#planning-and-applying","title":"Planning and Applying","text":"<pre><code># Plan for a specific environment\nterraform plan -var-file=environments/dev/dev.tfvars\nterraform plan -var-file=environments/qa/qa.tfvars\nterraform plan -var-file=environments/prod/prod.tfvars\n\n# Apply for a specific environment\nterraform apply -var-file=environments/dev/dev.tfvars\n\n# View current outputs\nterraform output\n</code></pre>"},{"location":"usage/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<pre><code># Install hooks (required before first commit)\npre-commit install\n\n# Run all hooks on all files\npre-commit run --all-files\n\n# Run a specific hook\npre-commit run terraform_fmt --all-files\n\n# Update hooks to latest versions\npre-commit autoupdate\n</code></pre>"},{"location":"usage/#documentation","title":"Documentation","text":"<pre><code># Generate Terraform documentation\nterraform-docs markdown table --output-file README.md .\n</code></pre>"},{"location":"usage/#working-with-environments","title":"Working with Environments","text":"<p>This template supports three environments with different configurations:</p>"},{"location":"usage/#development-dev","title":"Development (<code>dev</code>)","text":"<ul> <li>Cost-optimized settings (e.g., <code>t3.micro</code>, single instance)</li> <li>Minimal backup and monitoring</li> <li>Simplified networking</li> </ul>"},{"location":"usage/#qa-qa","title":"QA (<code>qa</code>)","text":"<ul> <li>Production-like architecture at reduced capacity</li> <li>Full testing capabilities enabled</li> <li>All features active for validation</li> </ul>"},{"location":"usage/#production-prod","title":"Production (<code>prod</code>)","text":"<ul> <li>High availability with multi-AZ deployment</li> <li>Enhanced monitoring and alerting</li> <li>Long retention periods</li> <li>Deletion protection enabled</li> </ul>"},{"location":"usage/#switching-environments","title":"Switching Environments","text":"<p>Always specify the environment tfvars file when running Terraform commands:</p> <pre><code>terraform plan -var-file=environments/&lt;env&gt;/&lt;env&gt;.tfvars\nterraform apply -var-file=environments/&lt;env&gt;/&lt;env&gt;.tfvars\n</code></pre>"},{"location":"usage/#working-with-modules","title":"Working with Modules","text":""},{"location":"usage/#using-existing-modules","title":"Using Existing Modules","text":"<p>The <code>modules/</code> directory contains reusable Terraform modules. Use them in <code>main.tf</code>:</p> <pre><code>module \"my_bucket\" {\n  source = \"./modules/s3-bucket\"\n\n  bucket_name = \"${local.resource_prefix}-my-bucket\"\n  environment = var.env\n\n  versioning_enabled = true\n\n  tags = local.common_tags\n}\n</code></pre>"},{"location":"usage/#creating-new-modules","title":"Creating New Modules","text":"<p>Follow the standard module structure:</p> <pre><code>modules/my-module/\n  \u251c\u2500\u2500 main.tf        # Resources\n  \u251c\u2500\u2500 variables.tf   # Inputs with validation\n  \u251c\u2500\u2500 outputs.tf     # Outputs with descriptions\n  \u2514\u2500\u2500 README.md      # Documentation\n</code></pre> <p>Ensure your module:</p> <ul> <li>Uses typed variables with descriptions</li> <li>Includes validation blocks where appropriate</li> <li>Follows snake_case naming conventions</li> <li>Has comprehensive outputs with descriptions</li> </ul>"},{"location":"usage/#naming-conventions","title":"Naming Conventions","text":"<p>Resources follow the pattern: <code>{prefix}-{env}-{resource-type}-{name}</code></p> <p>This is defined in <code>locals.tf</code> using <code>local.resource_prefix</code> and enforced by TFLint's snake_case rules.</p>"},{"location":"usage/#working-with-examples","title":"Working with Examples","text":"<p>The <code>examples/</code> directory contains production-ready patterns:</p> Example Description <code>data-sources/</code> AWS data source usage (VPC, AMI, account info) <code>module-composition/</code> Module reuse and composition patterns <code>complete-infrastructure/</code> Full stack integration template <p>Each example includes a README with usage instructions.</p>"},{"location":"usage/#backend-configuration","title":"Backend Configuration","text":""},{"location":"usage/#local-backend-default","title":"Local Backend (Default)","text":"<p>The template defaults to a local backend for development. State is stored in <code>terraform.tfstate</code>.</p>"},{"location":"usage/#s3-backend-production","title":"S3 Backend (Production)","text":"<p>For team collaboration, configure the S3 backend in <code>versions.tf</code>:</p> <pre><code>backend \"s3\" {\n  bucket         = \"your-terraform-state-bucket\"\n  key            = \"your-project/terraform.tfstate\"\n  region         = \"ap-southeast-1\"\n  dynamodb_table = \"terraform-state-lock\"\n  encrypt        = true\n}\n</code></pre> <p>Warning</p> <p>After changing the backend configuration, run <code>terraform init -migrate-state</code> to migrate existing state.</p>"},{"location":"workflows/","title":"CI/CD Workflows","text":"<p>This repository includes 14 GitHub Actions workflows for quality assurance, security scanning, deployment, and maintenance.</p>"},{"location":"workflows/#overview","title":"Overview","text":"Workflow Trigger Purpose Pre-commit CI Pull requests Comprehensive code quality checks Checkov PRs, push to main Security and compliance scanning Gitleaks PRs, push, manual Secret detection Lint PR Pull requests PR title validation Terraform Docs Pull requests Auto-generate TF documentation Infracost Pull requests Cost estimation Terraform CI/CD Manual dispatch Plan, apply, and destroy Release Push to main, manual Semantic versioning and releases Documentation Push to main, PRs Build and deploy docs site Pre-commit Auto-update Weekly, push/PR to main Update pre-commit hooks Automerge Pull requests Auto-merge bot PRs Stale Daily schedule Close stale issues/PRs Template Repo Sync Weekly, manual Sync with upstream template Update License Push to main Update license year"},{"location":"workflows/#pull-request-workflows","title":"Pull Request Workflows","text":""},{"location":"workflows/#pre-commit-ci","title":"Pre-commit CI","text":"<p>File: <code>.github/workflows/pre-commit-ci.yaml</code> Trigger: <code>pull_request_target</code></p> <p>Runs the full suite of pre-commit hooks on pull requests:</p> <ul> <li>Terraform formatting (<code>terraform fmt</code>)</li> <li>Terraform validation (<code>terraform validate</code>)</li> <li>TFLint linting</li> <li>Checkov security scanning</li> <li>terraform-docs documentation generation</li> <li>Gitleaks secret detection</li> <li>File quality checks (trailing whitespace, YAML syntax, etc.)</li> </ul> <p>Auto-commits any formatting fixes back to the PR branch.</p>"},{"location":"workflows/#checkov","title":"Checkov","text":"<p>File: <code>.github/workflows/checkov.yaml</code> Trigger: Pull requests (open/sync/reopen/edit), push to main/master</p> <p>Standalone security and compliance scanning with Checkov. Uploads SARIF results to the GitHub Security tab for centralized findings.</p>"},{"location":"workflows/#gitleaks","title":"Gitleaks","text":"<p>File: <code>.github/workflows/gitleaks.yaml</code> Trigger: Pull requests, push events, manual dispatch</p> <p>Scans the repository for hardcoded secrets, API keys, and sensitive data using Gitleaks. Prevents credential leaks from reaching the codebase.</p>"},{"location":"workflows/#lint-pr","title":"Lint PR","text":"<p>File: <code>.github/workflows/lint-pr.yaml</code> Trigger: <code>pull_request_target</code> (open/sync/reopen/edit)</p> <p>Validates pull request titles follow the Conventional Commits format. Posts a comment explaining the error if validation fails and removes it when fixed.</p> <p>Accepted types: <code>fix</code>, <code>feat</code>, <code>docs</code>, <code>ci</code>, <code>chore</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>revert</code></p>"},{"location":"workflows/#terraform-docs","title":"Terraform Docs","text":"<p>File: <code>.github/workflows/tf-docs.yaml</code> Trigger: Pull requests</p> <p>Auto-generates Terraform documentation using terraform-docs. Renders documentation into <code>TF-DOCS.md</code> and commits changes back to the PR branch.</p>"},{"location":"workflows/#infracost","title":"Infracost","text":"<p>File: <code>.github/workflows/infracost.yaml</code> Trigger: <code>pull_request_target</code></p> <p>Generates infrastructure cost estimates using Infracost. Compares baseline costs (main branch) against the PR changes and posts a detailed cost analysis as a PR comment.</p> <p>Note</p> <p>Requires the <code>INFRACOST_API_KEY</code> secret to be configured.</p>"},{"location":"workflows/#deployment-workflow","title":"Deployment Workflow","text":""},{"location":"workflows/#terraform-cicd","title":"Terraform CI/CD","text":"<p>File: <code>.github/workflows/terraform-aws.yml</code> Trigger: Manual dispatch (<code>workflow_dispatch</code>)</p> <p>The main deployment pipeline for Terraform infrastructure.</p> <p>Inputs:</p> Input Options Description <code>environment</code> dev, qa, prod Target environment <code>action</code> plan, apply, destroy Action to perform <p>Steps:</p> <ol> <li>Checkout code</li> <li>Setup Terraform (version from <code>TF_VERSION</code> env var)</li> <li>Configure AWS credentials</li> <li><code>terraform init</code></li> <li>Format check and validation</li> <li><code>terraform plan</code> with environment-specific tfvars</li> <li>Upload plan artifact (5-day retention)</li> <li>Apply or destroy (if selected)</li> <li>Capture and upload outputs (30-day retention)</li> </ol> <p>Security features:</p> <ul> <li>GitHub Environment protection rules support</li> <li>OIDC-ready permissions for AWS authentication</li> <li>Plan artifact upload for review before apply</li> <li>Environment-specific variable files</li> </ul> <p>Tip</p> <p>Configure approval requirements for the <code>prod</code> environment in Settings &gt; Environments to require manual approval before production deployments.</p>"},{"location":"workflows/#release-and-maintenance","title":"Release and Maintenance","text":""},{"location":"workflows/#release","title":"Release","text":"<p>File: <code>.github/workflows/release.yaml</code> Trigger: Push to main, manual dispatch</p> <p>Runs Semantic Release to automatically:</p> <ul> <li>Analyze commit messages</li> <li>Determine version bump (major/minor/patch)</li> <li>Update <code>CHANGELOG.md</code></li> <li>Create GitHub release with notes</li> <li>Tag the release commit</li> </ul>"},{"location":"workflows/#documentation","title":"Documentation","text":"<p>File: <code>.github/workflows/docs.yaml</code> Trigger: Push to main (docs changes), pull requests (docs changes)</p> <p>Builds and deploys the MkDocs documentation site to GitHub Pages.</p> <p>Jobs:</p> <ul> <li>configure: Detects repository URL and updates <code>mkdocs.yml</code> placeholders on first run</li> <li>validate: Runs <code>mkdocs build --strict</code> on PRs to catch errors</li> <li>deploy: Deploys to GitHub Pages via <code>mkdocs gh-deploy --force</code></li> </ul> <p>Only triggers on changes to <code>docs/**</code>, <code>mkdocs.yml</code>, or <code>requirements.txt</code>.</p>"},{"location":"workflows/#pre-commit-auto-update","title":"Pre-commit Auto-update","text":"<p>File: <code>.github/workflows/pre-commit-auto-update.yaml</code> Trigger: Weekly (Monday midnight), push to main, PR to main</p> <p>Automatically updates pre-commit hooks to their latest versions and creates a PR with the changes if updates are found.</p>"},{"location":"workflows/#automerge","title":"Automerge","text":"<p>File: <code>.github/workflows/automerge.yaml</code> Trigger: <code>pull_request_target</code></p> <p>Automatically enables squash merge for specific bot PRs:</p> <ul> <li>Dependabot dependency updates</li> <li>License updates</li> <li>Pre-commit hook updates</li> </ul>"},{"location":"workflows/#stale","title":"Stale","text":"<p>File: <code>.github/workflows/stale.yaml</code> Trigger: Daily schedule (midnight UTC)</p> <p>Manages stale issues and pull requests:</p> <ul> <li>Marks as stale after 7 days of inactivity</li> <li>Closes after 3 more days without activity</li> <li>Exempt labels: <code>bug</code>, <code>wip</code>, <code>on-hold</code>, <code>auto-update</code></li> </ul>"},{"location":"workflows/#template-repo-sync","title":"Template Repo Sync","text":"<p>File: <code>.github/workflows/template-repo-sync.yaml</code> Trigger: Weekly (Monday midnight), manual dispatch</p> <p>Syncs the repository with the upstream template repository. Creates a PR with template updates if changes exist. Uses <code>.templatesyncignore</code> to exclude customized files.</p> <p>Note</p> <p>Requires the <code>WORKFLOW_TOKEN</code> secret with <code>contents: write</code> and <code>pull-requests: write</code> permissions.</p>"},{"location":"workflows/#update-license","title":"Update License","text":"<p>File: <code>.github/workflows/update-license.yml</code> Trigger: Push to main</p> <p>Automatically updates the LICENSE file with the current year and organization name. Creates a PR if changes are detected.</p>"},{"location":"workflows/#required-secrets","title":"Required Secrets","text":"Secret Used By Description <code>AWS_ACCESS_KEY_ID</code> Terraform CI/CD AWS access key <code>AWS_SECRET_ACCESS_KEY</code> Terraform CI/CD AWS secret key <code>AWS_REGION</code> Terraform CI/CD AWS region <code>INFRACOST_API_KEY</code> Infracost Infracost API key <code>WORKFLOW_TOKEN</code> Template Repo Sync GitHub token with write permissions"}]}